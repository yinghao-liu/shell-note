# shell笔记
## 定义
### 元字符
元字符当没有被引用时，用以分割字:
> |  & ; ( ) < > space tab

### 保留字
在shell中有特殊的含义，保留字前后必须有空格或其他元字符以使shell识别
> ! case  do done elif else esac fi for function if in select then until while { } time [[ ]]

---
## shell语法
### case

case中一条模式结尾的`;;`表示一旦匹配中一个模式，其后的模式将不再考察。`;&`表示匹配中一条后继续执行下一条，而不管此条的模式是否匹配。`;;&`表示匹配中一条后继续考察下一个模式，若匹配则将会执行。

### coproc

---
## 引用
引用有三种机制：转义字符`\`、单引号`'`和双引号`"`

引用中有一种特殊的形式，`$'string'`,可以将ANSI C标准中的以下形式进行转换
> \a \b \e \E \f \n \r \t \v \\\ \\' \\'' \nnn \xHH \uHHHH \UHHHHHHHH

转换后的结果就是单引号转换，好像`$`不存在了一样。

引用示例（输出一个新行符）：
```sh
echo -n $'\n'

```

---
## 参数
赋值操作时，`+=`操作符可以用来追加或增加到该变量以前的值上。有三种情况
1. 当变量被设置为整数属性时，其实现为算数表达式。
2. 当变量是数组时，而且使用复合赋值方式（见下面的数组节），会在原数组的下一个索引处，追加新数组
3. 当变量是字符串时，字符串会原值基础上追加新值

### 特殊参数
这些参数只能被使用，不能被赋值

参数 | 含义
---- | ----
\* | 扩展成位置参数，从第一个参数开始，当被`""`引用时，它被整个扩展成一个单个的字，这个字是由每个位置参数和由`IFS`指定的分割符组成，如果`IFS`未设置，分割符为空格。所以，`"$*"`等同于`"$1 $2..."`。
@ | 和`*`类似，但是当被`""`引用时，每个参数都被扩展成单个的字，`"$@"`等同于`"$1" "$2" ...`。
\# | 扩展成十进制的位置参数的数量
? | 扩展成前一个表达式的退出状态
\- | 扩展成当前的选项参数
$ | 扩展成shell的进程ID
! | 扩展成最近后台运行的进程的ID
0 | 扩展为当前运行的shell或shell脚本的名字

### 数组
Bash提供了一维的索引数组和关联数组，内置指令`declare`会精确的声明一个数组，数组没有最大数量限制，也无需连续的索引和赋值。索引数组用整数或算数表达式来引用，从0开始；关联数组可以使用任何字符串来引用。

索引数组可以自动创建，通过给一个变量以这样的语法赋值`name[subscript]=value`。如果`subscript`是一个负值，那么可以表示为数组长度和该值算数和的索引，例如，一个有10个元素的数组，-1表示索引为`10+(-1)=9`。精确的声明一个索引数组，使用`declare -a name`，声明一个关联数组，使用`declare -A name`。

数组赋值使用复合赋值的形式`name=(value1 ... valuen)`，`value`形式为`[subscript]=string`。如果是索引数组，`[subscript]=`不是必须的。如果是单个数组值赋值可以是这样的：`name[subscript]=value`。以上的赋值操作都会自动创建一个数组。

使用`${name[subscript]}`以引用数组的值，其中`subscript`支持`@`和`*`扩展（见'特殊参数'）。`${#name[subscript]}`扩展为`${name[subscript]}`的长度。如果`subscript`是`*`或`@`，则扩展为数组成员的个数。

内置指令`unset`用以销毁数组，`unset name[subscript]`销毁一个数组成员，`unset name`销毁一个数组（如果`name`是数组）。

内置指令`declare`、`local`和`readonly`可以接收参数`-a`以指定一个索引数组，接收`-A`以指定一个关联数组。`read`使用`-a`以从标准输入中读取一个数组的值。

---
## 扩展
bash的扩展有七类：大括号扩展、波浪线扩展、参数变量扩展、命令置换、算数扩展、字分割和路径扩展。



---
## 重定向
[Here Documents](http://blog.csdn.net/ysdaniel/article/details/6899861)

[文件描述符](http://blog.csdn.net/wesleyluo/article/details/5646384)

形式：
```bash
<<[-]delimiter
  here-document
delimiter
```
在脚本中here-document以所见即所得的形式进行重定向，使用cat命令显示here-document的内容，`-`用以移除here-document开头的tab。

若`<<`后面的delimiter没有被`""`引用，那么\\, $ 和`，保持有它们的特殊含义，若想使用其本身使用\进行消除，或者使用引号引用delimiter。


## 条件表达式
[shell中的条件表达式](http://www.cnblogs.com/yinghao1991/p/7617965.html)















    
